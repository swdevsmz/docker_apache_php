
#ファイアーウォールの無効化
systemctl stop firewalld 
systemctl enable firewalld

#SELinuxの無効化
setenforce 0

#永続的に無効化するときは下記ファイルを編集
vi /etc/selinux/config

SELINUX=enforcing
↓
SELINUX=disabled


#OSのアップデート
yum update


＃最新のdockerをインストール
curl -sSL https://get.docker.com/ | sh

#DB2のDockerイメージの取得
docker pull ibmcom/db2express-c

#取得したイメージを確認
docer images

#Docker作業用ディレクトリを作成
cd ~
mkdir Docker
cd Docker

#コンテナ用ディレクトリを作成
mkdir mydb2
cd mydb2

#ホストとコンテナでデータファイルを共有する（永続化するため）ディレクトリの作成
mkdir mydatastorage
chmod 777 -R mydatastorage

#ホストとコンテナでメタデータを共有する（永続化するため）ディレクトリの作成
#このデータがないとDBとデータファイルとの紐づけが消える
mkdir sqllib
chmod 777 -R sqllib
cd sqllib
mkdir sqldbdir
chmod 777 -R sqldbdir

#新しいコンテナを実行する
docker run -it --name mydb -p 50000:50000 -e DB2INST1_PASSWORD=pass -e LICENSE=accept -v /root/Docker/mydb2/mystorage:/home/db2inst1/db2inst1 -v /root/Docker/mydb2/sqllib/sqldbdir:/home/db2inst1/sqllib/sqldbdir ibmcom/db2express-c bash
オプション
-i
-t
--name
-p
-e
-v ホストとコンテナでファイル、フォルダを同期を取る　ホストパス:コンテナ内のパス


#コンテナにログインするので、ユーザ切り替え、DB2起動、サンプルデータベースを作成
su db2inst1
db2start
db2sampl

CTRL+P,Qでコンテナからホストに戻る

docker stop コンテナ名
docker start コンテナ名
docker rm コンテナ名
docker rm -f コンテナ名
docker attach コンテナ名
docker exec -it コンテナ名 bash